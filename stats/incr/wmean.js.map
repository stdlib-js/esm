{"version":3,"sources":["@stdlib/stats/incr/wmean/lib/main.js","@stdlib/stats/incr/wmean/lib/index.js"],"names":["incrwmean","wsum","FLG","mu","x","w","arguments","length","__var_0__"],"mappings":"AAqFA,SAASA,IACR,IAAIC,EACAC,EACAC,EAKJ,OAHAF,EAAO,EACPE,EAAK,EAYL,SAAsBC,EAAGC,GACxB,GAA0B,IAArBC,UAAUC,OACd,YAAa,IAARL,EACG,KAEDC,EAKR,OAHAD,GAAM,EAENC,GAAQE,GADRJ,GAAQI,IACaD,EAAED,IChEtB,IAACH,EAAYQ","sourcesContent":["\n/**\n\n*\n* Copyright (c) 2019 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n/**\n* Returns an accumulator function which incrementally computes a weighted arithmetic mean.\n*\n* ## Method\n*\n* -   The weighted arithmetic mean is defined as\n*\n*     ```tex\n*     \\mu = \\frac{\\sum_{i=0}^{n-1} w_i x_i}{\\sum_{i=0}^{n-1} w_i}\n*     ```\n*\n*     where \\\\( w_i \\\\) are the weights.\n*\n* -   The weighted arithmetic mean is equivalent to the simple arithmetic mean when all weights are equal.\n*\n*     ```tex\n*     \\begin{align*}\n*     \\mu &= \\frac{\\sum_{i=0}^{n-1} w x_i}{\\sum_{i=0}^{n-1} w} \\\\\n*         &= \\frac{w\\sum_{i=0}^{n-1} x_i}{nw} \\\\\n*         &= \\frac{1}{n} \\sum_{i=0}^{n-1}\n*     \\end{align*}\n*     ```\n*\n* -   If the weights are different, then one can view weights either as sample frequencies or as a means to calculate probabilities where \\\\( p_i = w_i / \\sum w_i \\\\).\n*\n* -   To derive an incremental formula for computing a weighted arithmetic mean, let\n*\n*     ```tex\n*     W_n = \\sum_{i=1}^{n} w_i\n*     ```\n*\n* -   Accordingly,\n*\n*     ```tex\n*     \\begin{align*}\n*     \\mu_n &= \\frac{1}{W_n} \\sum_{i=1}^{n} w_i x_i \\\\\n*         &= \\frac{1}{W_n} \\biggl(w_n x_n + \\sum_{i=1}^{n-1} w_i x_i \\biggr) \\\\\n*         &= \\frac{1}{W_n} (w_n x_n + W_{n-1} \\mu_{n-1}) \\\\\n*         &= \\frac{1}{W_n} (w_n x_n + (W_n - w_n) \\mu_{n-1}) \\\\\n*         &= \\frac{1}{W_n} (W_n \\mu_{n-1} + w_n x_n - w_n\\mu_{n-1}) \\\\\n*         &= \\mu_{n-1} + \\frac{w_n}{W_n} (x_n - \\mu_{n-1})\n*     \\end{align*}\n*     ```\n*\n* @returns {Function} accumulator function\n*\n* @example\n* var accumulator = incrwmean();\n*\n* var mu = accumulator();\n* // returns null\n*\n* mu = accumulator( 2.0, 1.0 );\n* // returns 2.0\n*\n* mu = accumulator( 2.0, 0.5 );\n* // returns 2.0\n*\n* mu = accumulator( 3.0, 1.5 );\n* // returns 2.5\n*\n* mu = accumulator();\n* // returns 2.5\n*/\nfunction incrwmean() {\n\tvar wsum;\n\tvar FLG;\n\tvar mu;\n\n\twsum = 0.0;\n\tmu = 0.0;\n\n\treturn accumulator;\n\n\t/**\n\t* If provided arguments, the accumulator function returns an updated weighted mean. If not provided arguments, the accumulator function returns the current weighted mean.\n\t*\n\t* @private\n\t* @param {number} [x] - value\n\t* @param {number} [w] - weight\n\t* @returns {(number|null)} weighted mean or null\n\t*/\n\tfunction accumulator( x, w ) {\n\t\tif ( arguments.length === 0 ) {\n\t\t\tif ( FLG === void 0 ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn mu;\n\t\t}\n\t\tFLG = true;\n\t\twsum += w;\n\t\tmu += ( w/wsum ) * ( x-mu );\n\t\treturn mu;\n\t}\n}\n\n\n// EXPORTS //\nexport default incrwmean;\n","import __var_0__ from './main.js';\n/**\n\n*\n* Copyright (c) 2019 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n/**\n* Compute a weighted arithmetic mean incrementally.\n*\n* @module @stdlib/stats/incr/wmean\n*\n* @example\n* var incrwmean = require( '@stdlib/stats/incr/wmean' );\n*\n* var accumulator = incrwmean();\n*\n* var mu = accumulator();\n* // returns null\n*\n* mu = accumulator( 2.0, 1.0 );\n* // returns 2.0\n*\n* mu = accumulator( 2.0, 0.5 );\n* // returns 2.0\n*\n* mu = accumulator( 3.0, 1.5 );\n* // returns 2.5\n*\n* mu = accumulator();\n* // returns 2.5\n*/\n\n// MODULES //\nvar incrwmean = __var_0__;\n\n\n// EXPORTS //\nexport default incrwmean;\n"]}