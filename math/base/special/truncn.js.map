{"version":3,"sources":["@stdlib/math/base/special/truncn/lib/truncn.js","@stdlib/math/base/special/truncn/lib/index.js"],"names":["isnan","__var_0__","isInfinite","__var_1__","pow","__var_2__","abs","__var_3__","trunc","__var_4__","MAX_SAFE_INTEGER","__var_5__","MAX_EXP","__var_6__","MIN_EXP","__var_7__","MIN_EXP_SUBNORMAL","__var_8__","MAX_INT","HUGE","truncn","x","n","s","y","NaN"],"mappings":"gcA8BA,IAAIA,EAAQC,EACRC,EAAaC,EACbC,EAAMC,EACNC,EAAMC,EACNC,EAAQC,EACRC,EAAmBC,EACnBC,EAAUC,EACVC,EAAUC,EACVC,EAAoBC,EAKpBC,EAAUR,EAAmB,EAC7BS,EAAO,MA6EX,SAASC,EAAQC,EAAGC,GACnB,IAAIC,EACAC,EACJ,OACCxB,EAAOqB,IACPrB,EAAOsB,IACPpB,EAAYoB,GAELG,IAIPvB,EAAYmB,IAGN,IAANA,GAGAC,EAAIN,GAGFV,EAAKe,GAAMH,GAAWI,GAAK,EAEtBD,EAGHC,EAAIV,EACD,EAAMS,EAGTC,EAAIR,GACRS,EAAInB,EAAK,KAAQkB,EAAIV,IAEhBV,EADLsB,EAAKH,EAAEF,EAAQI,GAEPF,EAECb,EAAMgB,GAAGL,EAASI,IAE5BA,EAAInB,EAAK,IAAOkB,GAEXpB,EADLsB,EAAIH,EAAIE,GAEAF,EAEDb,EAAOgB,GAAMD,GCzHlB,IAACH,EAASnB","sourcesContent":["import __var_0__ from '@stdlib/math/base/assert/is-nan';\nimport __var_1__ from '@stdlib/math/base/assert/is-infinite';\nimport __var_2__ from '@stdlib/math/base/special/pow';\nimport __var_3__ from '@stdlib/math/base/special/abs';\nimport __var_4__ from '@stdlib/math/base/special/trunc';\nimport __var_5__ from '@stdlib/constants/math/float64-max-safe-integer';\nimport __var_6__ from '@stdlib/constants/math/float64-max-base10-exponent';\nimport __var_7__ from '@stdlib/constants/math/float64-min-base10-exponent';\nimport __var_8__ from '@stdlib/constants/math/float64-min-base10-exponent-subnormal';\n/**\n\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\nvar isnan = __var_0__;\nvar isInfinite = __var_1__;\nvar pow = __var_2__;\nvar abs = __var_3__;\nvar trunc = __var_4__;\nvar MAX_SAFE_INTEGER = __var_5__;\nvar MAX_EXP = __var_6__;\nvar MIN_EXP = __var_7__;\nvar MIN_EXP_SUBNORMAL = __var_8__;\n\n\n// VARIABLES //\n\nvar MAX_INT = MAX_SAFE_INTEGER + 1;\nvar HUGE = 1.0e+308;\n\n\n// MAIN //\n\n/**\n* Rounds a numeric value to the nearest multiple of \\\\(10^n\\\\) toward zero.\n*\n* ## Method\n*\n* 1.  If \\\\(|x| <= 2^{53}\\\\) and \\\\(|n| <= 308\\\\), we can use the formula\n*\n*     ```tex\n*     \\operatorname{truncn}(x,n) = \\frac{\\operatorname{trunc}(x \\cdot 10^{-n})}{10^{-n}}\n*     ```\n*\n*     which shifts the decimal to the nearest multiple of \\\\(10^n\\\\), performs a standard \\\\(\\mathrm{trunc}\\\\) operation, and then shifts the decimal to its original position.\n*\n*     <!-- <note> -->\n*\n*     If \\\\(x \\cdot 10^{-n}\\\\) overflows, \\\\(x\\\\) lacks a sufficient number of decimal digits to have any effect when rounding. Accordingly, the rounded value is \\\\(x\\\\).\n*\n*     <!-- </note> -->\n*\n*     <!-- <note> -->\n*\n*     Note that rescaling \\\\(x\\\\) can result in unexpected behavior due to the fact that most decimal fractions cannot be exactly represented as floating-point numbers. And further, rescaling can lead to slightly different fractional values, which, in turn, affects the result of \\\\(\\mathrm{trunc}\\\\).\n*\n*     <!-- </note> -->\n*\n* 2.  If \\\\(n > 308\\\\), we recognize that the maximum absolute double-precision floating-point number is \\\\(\\approx 1.8\\mbox{e}308\\\\) and, thus, the result of rounding any possible finite number \\\\(x\\\\) to the nearest \\\\(10^n\\\\) is \\\\(0\\\\). To ensure consistent behavior with \\\\(\\operatorname{trunc}(x)\\\\), the sign of \\\\(x\\\\) is preserved.\n*\n* 3.  If \\\\(n < -324\\\\), \\\\(n\\\\) exceeds the maximum number of possible decimal places (such as with subnormal numbers), and, thus, the rounded value is \\\\(x\\\\).\n*\n* 4.  If \\\\(x > 2^{53}\\\\), \\\\(x\\\\) is **always** an integer (i.e., \\\\(x\\\\) has no decimal digits). If \\\\(n <= 0\\\\), the rounded value is \\\\(x\\\\).\n*\n* 5.  If \\\\(n < -308\\\\), we let \\\\(m = n + 308\\\\) and modify the above formula to avoid overflow.\n*\n*     ```tex\n*     \\operatorname{truncn}(x,n) = \\frac{\\biggl(\\frac{\\operatorname{trunc}( (x \\cdot 10^{308}) 10^{-m})}{10^{308}}\\biggr)}{10^{-m}}\n*     ```\n*\n*     If overflow occurs, the rounded value is \\\\(x\\\\).\n*\n*\n* ## Special Cases\n*\n* ```tex\n* \\begin{align*}\n* \\operatorname{truncn}(\\mathrm{NaN}, n) &= \\mathrm{NaN} \\\\\n* \\operatorname{truncn}(x, \\mathrm{NaN}) &= \\mathrm{NaN} \\\\\n* \\operatorname{truncn}(x, \\pm\\infty) &= \\mathrm{NaN} \\\\\n* \\operatorname{truncn}(\\pm\\infty, n) &= \\pm\\infty \\\\\n* \\operatorname{truncn}(\\pm 0, n) &= \\pm 0\n* \\end{align*}\n* ```\n*\n*\n* @param {number} x - input value\n* @param {integer} n - integer power of `10`\n* @returns {number} rounded value\n*\n* @example\n* // Round a value to 4 decimal places:\n* var v = truncn( 3.141592653589793, -4 );\n* // returns 3.1415\n*\n* @example\n* // If n = 0, `truncn` behaves like `trunc`:\n* var v = truncn( 3.141592653589793, 0 );\n* // returns 3.0\n*\n* @example\n* // Round a value to the nearest thousand:\n* var v = truncn( 12368.0, 3 );\n* // returns 12000.0\n*/\nfunction truncn( x, n ) {\n\tvar s;\n\tvar y;\n\tif (\n\t\tisnan( x ) ||\n\t\tisnan( n ) ||\n\t\tisInfinite( n )\n\t) {\n\t\treturn NaN;\n\t}\n\tif (\n\t\t// Handle infinities...\n\t\tisInfinite( x ) ||\n\n\t\t// Handle +-0...\n\t\tx === 0.0 ||\n\n\t\t// If `n` exceeds the maximum number of feasible decimal places (such as with subnormal numbers), nothing to truncate...\n\t\tn < MIN_EXP_SUBNORMAL ||\n\n\t\t// If `|x|` is large enough, no decimals to truncate...\n\t\t( abs( x ) > MAX_INT && n <= 0 )\n\t) {\n\t\treturn x;\n\t}\n\t// The maximum absolute double is ~1.8e308. Accordingly, any possible positive finite `x` rounded to the nearest >=10^309 is zero.\n\tif ( n > MAX_EXP ) {\n\t\treturn 0.0 * x; // preserve the sign (same behavior as trunc)\n\t}\n\t// If we overflow, return `x`, as the number of digits to the right of the decimal is too small (i.e., `x` is too large / lacks sufficient fractional precision) for there to be any effect when rounding...\n\tif ( n < MIN_EXP ) {\n\t\ts = pow( 10.0, -(n + MAX_EXP) );\n\t\ty = (x*HUGE) * s; // order of operation matters!\n\t\tif ( isInfinite( y ) ) {\n\t\t\treturn x;\n\t\t}\n\t\treturn ( trunc(y)/HUGE ) / s;\n\t}\n\ts = pow( 10.0, -n );\n\ty = x * s;\n\tif ( isInfinite( y ) ) {\n\t\treturn x;\n\t}\n\treturn trunc( y ) / s;\n}\n\n\n// EXPORTS //\nexport default truncn;\n","import __var_0__ from './truncn.js';\n/**\n\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n/**\n* Round a numeric value to the nearest multiple of `10^n` toward zero.\n*\n* @module @stdlib/math/base/special/truncn\n*\n* @example\n* var truncn = require( '@stdlib/math/base/special/truncn' );\n*\n* // Round a value to 4 decimal places:\n* var v = truncn( 3.141592653589793, -4 );\n* // returns 3.1415\n*\n* // If n = 0, `truncn` behaves like `trunc`:\n* v = truncn( 3.141592653589793, 0 );\n* // returns 3.0\n*\n* // Round a value to the nearest thousand:\n* v = truncn( 12368.0, 3 );\n* // returns 12000.0\n*/\n\n// MODULES //\nvar truncn = __var_0__;\n\n\n// EXPORTS //\nexport default truncn;\n"]}