{"version":3,"sources":["@stdlib/nlp/tokenize/lib/tokenize.js","@stdlib/nlp/tokenize/lib/index.js"],"names":["isBoolean","__var_0__","isPrimitive","isString","__var_1__","hasOwnProp","__var_2__","ABBRS","__var_3__","EMOJIS","__var_4__","CONTRACT","__var_5__","REGEXP_PREFIXES","REGEXP_SUFFIXES","extend","arr","ext","i","length","push","tokenizeSubstring","substr","match","done","res","prefixes","suffixes","split","tokenize","str","keepWhitespace","subtkns","substrs","tokens","cache","TypeError","arguments"],"mappings":"4yNA2BIA,EAAYC,EAAUC,YACtBC,EAAWC,EAAUF,YACrBG,EAAaC,EACbC,EAAQC,EACRC,EAASC,EACTC,EAAWC,EAKXC,EAAkB,sBAClBC,EAAkB,2BAkBtB,SAASC,EAAQC,EAAKC,GACrB,IAAIC,EACJ,IAAMA,EAAI,EAAGA,EAAID,EAAIE,OAAQD,IAC5BF,EAAII,KAAMH,EAAKC,IAEhB,OAAOF,EAeR,SAASK,EAAmBC,GAC3B,IAEIC,EACAC,EACAC,EAJAC,EAAW,GACXC,EAAW,GAKf,GAEGlB,EAAQa,IACRf,EAAOe,IACPX,EAAUW,GAkBXE,GAAO,GAhBPD,EAAQD,EAAOM,MAAOf,IACXM,OAAS,GACnBO,EAASN,KAAMG,EAAO,IACtBD,EAASC,EAAO,KAGhBA,EAAQD,EAAOM,MAAOd,IACXK,OAAS,GACnBG,EAASC,EAAO,GAChBI,EAASP,KAAMG,EAAO,KAEtBC,GAAO,SAOAA,GAKX,OAHAC,EAAMC,GACFN,KAAME,GACVP,EAAQU,EAAKE,GACNF,EA8BR,SAASI,EAAUC,EAAKC,GACvB,IAAIC,EACAC,EACAC,EACAZ,EACAa,EACAjB,EACJ,IAAMf,EAAU2B,GACf,MAAM,IAAIM,UAAW,wEAA0EN,EAAM,MAEtG,GAAKO,UAAUlB,OAAS,IACjBnB,EAAW+B,GAChB,MAAM,IAAIK,UAAW,0EAA4EL,EAAiB,MAGpH,IAAMD,EACL,MAAO,GAgBR,IAXCG,EADIF,EACMD,EAAIF,MAAO,SAEXE,EAAIF,MAAO,OAItBO,EAAQ,GAGRD,EAAS,GAEHhB,EAAI,EAAGA,EAAIe,EAAQd,OAAQD,IAChCI,EAASW,EAASf,GACbb,EAAY8B,EAAOb,GACvBP,EAAQmB,EAAQC,EAAOb,KAIvBP,EAAQmB,EADRF,EAAUX,EAAmBC,IAE7Ba,EAAOb,GAAWU,GAGpB,OAAOE,EClJL,IAACL,EAAW5B","sourcesContent":["import __var_0__ from '@stdlib/assert/is-boolean';\nimport __var_1__ from '@stdlib/assert/is-string';\nimport __var_2__ from '@stdlib/assert/has-own-property';\nimport __var_3__ from './abbreviations.json';\nimport __var_4__ from './emojis.json';\nimport __var_5__ from './contractions.json';\n/**\n\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\nvar isBoolean = __var_0__.isPrimitive;\nvar isString = __var_1__.isPrimitive;\nvar hasOwnProp = __var_2__;\nvar ABBRS = __var_3__;\nvar EMOJIS = __var_4__;\nvar CONTRACT = __var_5__;\n\n\n// VARIABLES //\n\nvar REGEXP_PREFIXES = /^([,([{*<\"“'`‘.])/gi;\nvar REGEXP_SUFFIXES = /([,.!?%*>:;\"'”`)\\]}])$/gi;\n\n\n// FUNCTIONS //\n\n/**\n* Extends an array by the elements of another array.\n*\n* @private\n* @param {Array} arr - input array\n* @param {Array} ext - array to extend `arr` with\n* @returns {Array} mutated input array\n*\n* @example\n* var arr = [ 1, 2, 3 ];\n* var out = extend( arr, [ 4, 5 ] );\n* // returns [ 1, 2, 3, 4, 5 ]\n*/\nfunction extend( arr, ext ) {\n\tvar i;\n\tfor ( i = 0; i < ext.length; i++ ) {\n\t\tarr.push( ext[ i ] );\n\t}\n\treturn arr;\n}\n\n/**\n* Tokenizes a substring.\n*\n* @private\n* @param {string} substr - input string\n* @returns {Array} token array\n*\n* @example\n* var str = '(never)';\n* var out = tokenizeSubstring( str );\n* // returns [ '(', 'never', ')' ]\n*/\nfunction tokenizeSubstring( substr ) {\n\tvar prefixes = [];\n\tvar suffixes = [];\n\tvar match;\n\tvar done;\n\tvar res;\n\n\tdo {\n\t\tif (\n\t\t\t!EMOJIS[ substr ] &&\n\t\t\t!ABBRS[ substr ] &&\n\t\t\t!CONTRACT[ substr ]\n\t\t) {\n\t\t\tmatch = substr.split( REGEXP_PREFIXES );\n\t\t\tif ( match.length > 1 ) {\n\t\t\t\tprefixes.push( match[ 1 ] );\n\t\t\t\tsubstr = match[ 2 ];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmatch = substr.split( REGEXP_SUFFIXES );\n\t\t\t\tif ( match.length > 1 ) {\n\t\t\t\t\tsubstr = match[ 0 ];\n\t\t\t\t\tsuffixes.push( match[ 1 ] );\n\t\t\t\t} else {\n\t\t\t\t\tdone = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tdone = true;\n\t\t}\n\t} while ( !done );\n\n\tres = prefixes;\n\tres.push( substr );\n\textend( res, suffixes );\n\treturn res;\n}\n\n\n// MAIN //\n\n/**\n* Tokenize a string.\n*\n* @param {string} str - input string\n* @param {boolean} [keepWhitespace=false] - boolean indicating whether whitespace characters should be returned as part of the token array\n* @throws {TypeError} first argument must be a string primitive\n* @throws {TypeError} second argument must be a boolean primitive\n* @returns {Array} array of tokens\n*\n* @example\n* var str = 'Hello World!';\n* var out = tokenize( str );\n* // returns [ 'Hello', 'World', '!' ]\n*\n* @example\n* var str = '';\n* var out = tokenize( str );\n* // returns []\n*\n* @example\n* var str = 'Hello Mrs. Maple, could you call me back?';\n* var out = tokenize( str );\n* // returns [ 'Hello', 'Mrs.', 'Maple', ',', 'could', 'you', 'call', 'me', 'back', '?' ]\n*/\nfunction tokenize( str, keepWhitespace ) {\n\tvar subtkns;\n\tvar substrs;\n\tvar tokens;\n\tvar substr;\n\tvar cache;\n\tvar i;\n\tif ( !isString( str ) ) {\n\t\tthrow new TypeError( 'invalid argument. First argument must be a string primitive. Value: `' + str + '`.' );\n\t}\n\tif ( arguments.length > 1 ) {\n\t\tif ( !isBoolean( keepWhitespace ) ) {\n\t\t\tthrow new TypeError( 'invalid argument. Second argument must be a boolean primitive. Value: `' + keepWhitespace + '`.' );\n\t\t}\n\t}\n\tif ( !str ) {\n\t\treturn [];\n\t}\n\n\t// Split on whitespace:\n\tif ( keepWhitespace ) {\n\t\tsubstrs = str.split( /(\\s+)/ );\n\t} else {\n\t\tsubstrs = str.split( /\\s+/ );\n\t}\n\n\t// Set up cache to hold tokens for substring matches:\n\tcache = {};\n\n\t// Initialize token array:\n\ttokens = [];\n\n\tfor ( i = 0; i < substrs.length; i++ ) {\n\t\tsubstr = substrs[ i ];\n\t\tif ( hasOwnProp( cache, substr ) ) {\n\t\t\textend( tokens, cache[ substr ] );\n\t\t}\n\t\telse {\n\t\t\tsubtkns = tokenizeSubstring( substr );\n\t\t\textend( tokens, subtkns );\n\t\t\tcache[ substr ] = subtkns;\n\t\t}\n\t}\n\treturn tokens;\n}\n\n\n// EXPORTS //\nexport default tokenize;\n","import __var_0__ from './tokenize.js';\n/**\n\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n/**\n* Tokenize a string.\n*\n* @module @stdlib/nlp/tokenize\n*\n* @example\n* var tokenize = require( '@stdlib/nlp/tokenize' );\n*\n* var str = 'Hello Mrs. Maple, could you call me back?';\n* var out = tokenize( str );\n* // returns [ 'Hello', 'Mrs.', 'Maple', ',', 'could', 'you', 'call', 'me', 'back', '?' ]\n*\n* str = 'Hello World!';\n* out = tokenize( str );\n* // returns [ 'Hello', 'World', '!' ]\n*/\n\n// MODULES //\nvar tokenize = __var_0__;\n\n\n// EXPORTS //\nexport default tokenize;\n"]}